# HTTP重定向

> #### HTTP重定向 

所谓 “重定向” 其实 客户端 、服务器端都可以实现 ，客户端的 “重定向” 可以说是有客户端代码决定的，但是还有一类跳转就是由服务器来发起的，浏览器根据服务器响应的状态码、Location 头字段来决定跳转至何处，这就是所谓的 “HTTP重定向”


> #### HTTP重定向过程

重定向的状态码都是以3开头（3XX）的， 比如：301、302、303、307、308 等，各个状态码的应用场景可能有些不同，但是从实现过程来讲都是一样的

例如：浏览器向服务器发送了一个请求，服务器响应了这个请求，其中 状态码是 302 ， “Location” 头字段的值是 “http://www.jd.com/index.html” , 那么这个时候浏览器发现状态码是 302 , 接着就回去找 “Location” 头字段, 然后跳转到 “http://www.jd.com/index.html”, 这个过程其实是发生了两次HTTP请求，当然对用户来说是无感知的。至于 “Location” 头字段的值可以是站内跳转 “相对路径”，如果是站外跳转则必须是 “绝对路径”


> #### HTTP重定向状态码区别

1、“**301（Moved Permanently）**” 俗称 “**永久重定向**”, 表示 原来的 URL 已经不用了，后续要用新的URL，浏览器看到 301 就会去更新 历史记录、DNS缓存、书签，然后跳转等

2、“**302（Moved Temporarily）**” 俗称 “**临时重定向**”, 表示 原来的 URL 处于 “临时维修” 状态，新的 URL 暂时顶包

3、“**303（See Other）**” 类似 302，表示重定向后的请求改成 “GET” 请求，避免 POST/PUT 的重复操作

4、“**307（Temporary Redirect）**” 类似 302，表示重定向后的请求方法和实体都不许动，含义比 302 更加明确

5、“**308（Permanent Redirect）**” 类似 307，表示不允许重定向后的请求方变动，但是“**永久重定向**”的意思

> #### HTTP重定向注意点

1、“**性能损耗**” 重定向虽然对用户来说是透明的，但是它经历了2次HTTP请求，如果是重定向到站内可能有长连接、缓存之类的，如果是重定向到站外，在网络环境比较差的条件下严重影响用户体验，所以重定向要适度使用

2、“**循环跳转**” 如果重定向的策略设置考虑欠佳，可以能会出现 “死循环” 问题